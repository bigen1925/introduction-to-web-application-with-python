---
title: "[執筆中] URLパラメータを受け取れるようにする"
---

# 中〜大規模なWebサービスで必要となる機能
もうかなりフレームワークっぽくなってきて、現在ある機能だけでもそれなりのWebサービスが構築できると思います。
もうWebアプリケーションの基本的な仕組みが理解できて、満足してきた人もいるでしょう。

しかし、サービスが少し大きくなってくると共通して欲しくなる機能がまだ不足しています。
これ以降の章はそういった
*「小さなサービスでは今すぐに必要ではないが、世間ではよく使われる機能」*
について扱っていくことになります。

具体的な例として、

- URLパラメータ
- テンプレートエンジン
- Cookie
- Session
- Middleware
- Database連携

などがあります。

手始めに、本章では**URLパラメータ**を扱えるようにしていきます。

# URLパラメータを扱う
「URLパラメータを扱う」とは、URLの中に現れる文字列（= URLパラメータ）を変数としてアプリケーション内で扱うことを意味します。

言葉で説明すると難しいですが、よくある例として、
`/user/132/profile`
のようなpathにアクセスすると、IDが132のユーザーの詳細情報が表示される、などのWebページを見たことはないでしょうか。

私達の今のアプリケーションではpathに現れる文字列を変数としては扱えないため、上記のような機能を提供しようとすると、
```python
URL_VIEW = {
    '/user/1/profile': views.user1,
    '/user/2/profile': views.user2,
    '/user/3/profile': views.user3,
    # ...
}
```
などと1つずつpathを追加していくしかありません。
しかも、ユーザーの数が増えたり減ったりした状況には対応できません。

コレに対しては、例えば
```python
URL_VIEW = {
    '/user/<user_id>/profile': views.user
}
```
などと設定しておけば`/user/(数字)/profile`のpathが全てviews.userに紐付いて、view関数の中から`(数字)`の値にアクセスできるようになっていると便利です。

このような機能は、一般的なWebフレームワークであれば必ず備えている機能ですので、私達も実装してみましょう。

-----

URLパターンの扱い方は、

- URLパラメータのパターン指定の方法
→　`/user/<user_id>/profile`と書くのか、`/user/:user_id/profile`と書くのか
- パラメータへのアクセスの仕方
→　`request.params["user_id]`でアクセスできるのか、view関数の第2引数として渡されてくる(`def user(request, user_id):`となる)のか

などの観点でフレームワークごとに特色があります。

私たちのフレームワークでは、比較的簡単な下記の仕様で実装していこうと思います。

- ルーティング設定には`/user/<user_id>/profile`のように、`<変数名>`の形式で指定する
- パラメータは、リクエストオブジェクトのparams属性(`request.params`)に`dict型`で格納/アクセスする

# ソースコード
では、まずは上記の機能を実装したソースコードを見てみましょう

**`study/urls.py`**
